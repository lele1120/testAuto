<ns0:test-suite xmlns:ns0="urn:model.allure.qatools.yandex.ru" start="1541583508918" stop="1541583509230">
  <name>test_case</name>
  <labels/>
  <test-cases>
    <test-case start="1541583508918" status="broken" stop="1541583509152">
      <name>.Users.xuchen.PycharmProjects.testAuto.test_case.test_bicai.test_one</name>
      <failure>
        <message>JsonRpcError: -32001 Jsonrpc error: &lt;java.lang.IllegalStateException&gt; data: java.lang.IllegalStateException: UiAutomation not connected!
	at android.app.UiAutomation.throwIfNotConnectedLocked(UiAutomation.java:971)
	at android.app.UiAutomation.waitForIdle(UiAutomation.java:577)
	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:532)
	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:523)
	at android.support.test.uiautomator.QueryController.getCurrentPackageName(QueryController.java:511)
	at android.support.test.uiautomator.UiDevice.getCurrentPackageName(UiDevice.java:653)
	at com.github.uiautomator.stub.DeviceInfo.&lt;init&gt;(DeviceInfo.java:51)
	at com.github.uiautomator.stub.DeviceInfo.getDeviceInfo(DeviceInfo.java:44)
	at com.github.uiautomator.stub.AutomatorServiceImpl.deviceInfo(AutomatorServiceImpl.java:105)
	at java.lang.reflect.Method.invoke(Native Method)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.invoke(JsonRpcBasicServer.java:467)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleObject(JsonRpcBasicServer.java:352)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleJsonNodeRequest(JsonRpcBasicServer.java:283)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleRequest(JsonRpcBasicServer.java:251)
	at com.github.uiautomator.stub.AutomatorHttpServer.serve(AutomatorHttpServer.java:100)
	at fi.iki.elonen.NanoHTTPD.serve(NanoHTTPD.java:2244)
	at fi.iki.elonen.NanoHTTPD$HTTPSession.execute(NanoHTTPD.java:945)
	at fi.iki.elonen.NanoHTTPD$ClientHandler.run(NanoHTTPD.java:192)
	at java.lang.Thread.run(Thread.java:818)
</message>
        <stack-trace>@pytest.fixture(scope='module')
    def driver():
        wifi = Get_Value_By_Yaml().get_value("Y66手机ip")
        driver = u2.connect_wifi(wifi)
&gt;       print(driver.info)

test_bicai.py:15: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:985: in __getattr__
    return getattr(self._default_session, attr)
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:1423: in info
    return self.jsonrpc.deviceInfo()
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:349: in __call__
    params, http_timeout)
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:356: in jsonrpc_retry_call
    return self.jsonrpc_call(*args, **kwargs)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = uiautomator2 object for 192.168.100.45:7912
jsonrpc_url = 'http://192.168.100.45:7912/jsonrpc/0', method = 'deviceInfo'
params = {}, http_timeout = 60

    def jsonrpc_call(self, jsonrpc_url, method, params=[], http_timeout=60):
        """ jsonrpc2 call
        Refs:
            - http://www.jsonrpc.org/specification
        """
        request_start = time.time()
        data = {
            "jsonrpc": "2.0",
            "id": self._jsonrpc_id(method),
            "method": method,
            "params": params,
        }
        data = json.dumps(data).encode('utf-8')
        res = self._reqsess.post(
            jsonrpc_url,
            headers={"Content-Type": "application/json"},
            timeout=http_timeout,
            data=data)
        if DEBUG:
            print("Shell$ curl -X POST -d '{}' {}".format(data, jsonrpc_url))
            print("Output&gt; " + res.text)
        if res.status_code == 502:
            raise GatewayError(res, "gateway error, time used %.1fs" %
                               (time.time() - request_start))
        if res.status_code == 410:  # http status gone: session broken
            raise SessionBrokenError("app quit or crash", jsonrpc_url,
                                     res.text)
        if res.status_code != 200:
            raise UiaError(jsonrpc_url, data, res.status_code, res.text,
                           "HTTP Return code is not 200", res.text)
        jsondata = res.json()
        error = jsondata.get('error')
        if not error:
            return jsondata.get('result')
    
        # error happends
        err = JsonRpcError(error)
    
        if err.message:
            if 'UiAutomation not connected' in err.message:
                err.__class__ = UiAutomationNotConnectedError
            elif 'uiautomator.UiObjectNotFoundException' in err.message:
                err.__class__ = UiObjectNotFoundError
            elif 'android.support.test.uiautomator.StaleObjectException' in err.message:
                # StaleObjectException
                # https://developer.android.com/reference/android/support/test/uiautomator/StaleObjectException.html
                # A StaleObjectException exception is thrown when a UiObject2 is used after the underlying View has been destroyed.
                # In this case, it is necessary to call findObject(BySelector) to obtain a new UiObject2 instance.
                err.__class__ = StaleObjectExceptionError
            elif 'java.lang.NullObjectException' in err.message:
                err.__class__ = NullExceptionError
&gt;       raise err
E       uiautomator2.JsonRpcError: -32001 Jsonrpc error: &lt;java.lang.IllegalStateException&gt; data: java.lang.IllegalStateException: UiAutomation not connected!
E       	at android.app.UiAutomation.throwIfNotConnectedLocked(UiAutomation.java:971)
E       	at android.app.UiAutomation.waitForIdle(UiAutomation.java:577)
E       	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:532)
E       	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:523)
E       	at android.support.test.uiautomator.QueryController.getCurrentPackageName(QueryController.java:511)
E       	at android.support.test.uiautomator.UiDevice.getCurrentPackageName(UiDevice.java:653)
E       	at com.github.uiautomator.stub.DeviceInfo.&lt;init&gt;(DeviceInfo.java:51)
E       	at com.github.uiautomator.stub.DeviceInfo.getDeviceInfo(DeviceInfo.java:44)
E       	at com.github.uiautomator.stub.AutomatorServiceImpl.deviceInfo(AutomatorServiceImpl.java:105)
E       	at java.lang.reflect.Method.invoke(Native Method)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.invoke(JsonRpcBasicServer.java:467)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleObject(JsonRpcBasicServer.java:352)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleJsonNodeRequest(JsonRpcBasicServer.java:283)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleRequest(JsonRpcBasicServer.java:251)
E       	at com.github.uiautomator.stub.AutomatorHttpServer.serve(AutomatorHttpServer.java:100)
E       	at fi.iki.elonen.NanoHTTPD.serve(NanoHTTPD.java:2244)
E       	at fi.iki.elonen.NanoHTTPD$HTTPSession.execute(NanoHTTPD.java:945)
E       	at fi.iki.elonen.NanoHTTPD$ClientHandler.run(NanoHTTPD.java:192)
E       	at java.lang.Thread.run(Thread.java:818)

../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:424: JsonRpcError</stack-trace>
      </failure>
      <attachments/>
      <labels>
        <label name="story" value="测试点击头像弹出侧边栏"/>
        <label name="severity" value="normal"/>
        <label name="thread" value="5073-MainThread"/>
        <label name="host" value="localhost"/>
        <label name="framework" value="pytest"/>
        <label name="language" value="cpython3"/>
      </labels>
      <steps/>
    </test-case>
    <test-case start="1541583509154" status="broken" stop="1541583509230">
      <name>.Users.xuchen.PycharmProjects.testAuto.test_case.test_bicai.test_two</name>
      <failure>
        <message>JsonRpcError: -32001 Jsonrpc error: &lt;java.lang.IllegalStateException&gt; data: java.lang.IllegalStateException: UiAutomation not connected!
	at android.app.UiAutomation.throwIfNotConnectedLocked(UiAutomation.java:971)
	at android.app.UiAutomation.waitForIdle(UiAutomation.java:577)
	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:532)
	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:523)
	at android.support.test.uiautomator.QueryController.getCurrentPackageName(QueryController.java:511)
	at android.support.test.uiautomator.UiDevice.getCurrentPackageName(UiDevice.java:653)
	at com.github.uiautomator.stub.DeviceInfo.&lt;init&gt;(DeviceInfo.java:51)
	at com.github.uiautomator.stub.DeviceInfo.getDeviceInfo(DeviceInfo.java:44)
	at com.github.uiautomator.stub.AutomatorServiceImpl.deviceInfo(AutomatorServiceImpl.java:105)
	at java.lang.reflect.Method.invoke(Native Method)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.invoke(JsonRpcBasicServer.java:467)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleObject(JsonRpcBasicServer.java:352)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleJsonNodeRequest(JsonRpcBasicServer.java:283)
	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleRequest(JsonRpcBasicServer.java:251)
	at com.github.uiautomator.stub.AutomatorHttpServer.serve(AutomatorHttpServer.java:100)
	at fi.iki.elonen.NanoHTTPD.serve(NanoHTTPD.java:2244)
	at fi.iki.elonen.NanoHTTPD$HTTPSession.execute(NanoHTTPD.java:945)
	at fi.iki.elonen.NanoHTTPD$ClientHandler.run(NanoHTTPD.java:192)
	at java.lang.Thread.run(Thread.java:818)
</message>
        <stack-trace>@pytest.fixture(scope='module')
    def driver():
        wifi = Get_Value_By_Yaml().get_value("Y66手机ip")
        driver = u2.connect_wifi(wifi)
&gt;       print(driver.info)

test_bicai.py:15: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:985: in __getattr__
    return getattr(self._default_session, attr)
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:1423: in info
    return self.jsonrpc.deviceInfo()
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:349: in __call__
    params, http_timeout)
../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:356: in jsonrpc_retry_call
    return self.jsonrpc_call(*args, **kwargs)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = uiautomator2 object for 192.168.100.45:7912
jsonrpc_url = 'http://192.168.100.45:7912/jsonrpc/0', method = 'deviceInfo'
params = {}, http_timeout = 60

    def jsonrpc_call(self, jsonrpc_url, method, params=[], http_timeout=60):
        """ jsonrpc2 call
        Refs:
            - http://www.jsonrpc.org/specification
        """
        request_start = time.time()
        data = {
            "jsonrpc": "2.0",
            "id": self._jsonrpc_id(method),
            "method": method,
            "params": params,
        }
        data = json.dumps(data).encode('utf-8')
        res = self._reqsess.post(
            jsonrpc_url,
            headers={"Content-Type": "application/json"},
            timeout=http_timeout,
            data=data)
        if DEBUG:
            print("Shell$ curl -X POST -d '{}' {}".format(data, jsonrpc_url))
            print("Output&gt; " + res.text)
        if res.status_code == 502:
            raise GatewayError(res, "gateway error, time used %.1fs" %
                               (time.time() - request_start))
        if res.status_code == 410:  # http status gone: session broken
            raise SessionBrokenError("app quit or crash", jsonrpc_url,
                                     res.text)
        if res.status_code != 200:
            raise UiaError(jsonrpc_url, data, res.status_code, res.text,
                           "HTTP Return code is not 200", res.text)
        jsondata = res.json()
        error = jsondata.get('error')
        if not error:
            return jsondata.get('result')
    
        # error happends
        err = JsonRpcError(error)
    
        if err.message:
            if 'UiAutomation not connected' in err.message:
                err.__class__ = UiAutomationNotConnectedError
            elif 'uiautomator.UiObjectNotFoundException' in err.message:
                err.__class__ = UiObjectNotFoundError
            elif 'android.support.test.uiautomator.StaleObjectException' in err.message:
                # StaleObjectException
                # https://developer.android.com/reference/android/support/test/uiautomator/StaleObjectException.html
                # A StaleObjectException exception is thrown when a UiObject2 is used after the underlying View has been destroyed.
                # In this case, it is necessary to call findObject(BySelector) to obtain a new UiObject2 instance.
                err.__class__ = StaleObjectExceptionError
            elif 'java.lang.NullObjectException' in err.message:
                err.__class__ = NullExceptionError
&gt;       raise err
E       uiautomator2.JsonRpcError: -32001 Jsonrpc error: &lt;java.lang.IllegalStateException&gt; data: java.lang.IllegalStateException: UiAutomation not connected!
E       	at android.app.UiAutomation.throwIfNotConnectedLocked(UiAutomation.java:971)
E       	at android.app.UiAutomation.waitForIdle(UiAutomation.java:577)
E       	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:532)
E       	at android.support.test.uiautomator.QueryController.waitForIdle(QueryController.java:523)
E       	at android.support.test.uiautomator.QueryController.getCurrentPackageName(QueryController.java:511)
E       	at android.support.test.uiautomator.UiDevice.getCurrentPackageName(UiDevice.java:653)
E       	at com.github.uiautomator.stub.DeviceInfo.&lt;init&gt;(DeviceInfo.java:51)
E       	at com.github.uiautomator.stub.DeviceInfo.getDeviceInfo(DeviceInfo.java:44)
E       	at com.github.uiautomator.stub.AutomatorServiceImpl.deviceInfo(AutomatorServiceImpl.java:105)
E       	at java.lang.reflect.Method.invoke(Native Method)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.invoke(JsonRpcBasicServer.java:467)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleObject(JsonRpcBasicServer.java:352)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleJsonNodeRequest(JsonRpcBasicServer.java:283)
E       	at com.googlecode.jsonrpc4j.JsonRpcBasicServer.handleRequest(JsonRpcBasicServer.java:251)
E       	at com.github.uiautomator.stub.AutomatorHttpServer.serve(AutomatorHttpServer.java:100)
E       	at fi.iki.elonen.NanoHTTPD.serve(NanoHTTPD.java:2244)
E       	at fi.iki.elonen.NanoHTTPD$HTTPSession.execute(NanoHTTPD.java:945)
E       	at fi.iki.elonen.NanoHTTPD$ClientHandler.run(NanoHTTPD.java:192)
E       	at java.lang.Thread.run(Thread.java:818)

../../../venv/testAuto/lib/python3.7/site-packages/uiautomator2/__init__.py:424: JsonRpcError</stack-trace>
      </failure>
      <attachments/>
      <labels>
        <label name="severity" value="normal"/>
        <label name="thread" value="5073-MainThread"/>
        <label name="host" value="localhost"/>
        <label name="framework" value="pytest"/>
        <label name="language" value="cpython3"/>
      </labels>
      <steps/>
    </test-case>
  </test-cases>
</ns0:test-suite>
